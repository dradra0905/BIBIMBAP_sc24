import{u as F,r,s as H,a as G,b as s,j as t,I,c as U,d as j}from"./index-e6579e08.js";import{s as b,Q as $}from"./sortBy-5bf2bd8a.js";import{I as B}from"./IconBell-1fdbf761.js";/* empty css              *//* empty css                       */import{g as x,a as v,r as X,d as Y}from"./school-623913e2.js";import{T as z}from"./tippy-react.esm-a8453acd.js";import{q as D,_ as y}from"./transition-80f3a448.js";import"./_baseIsEqual-f73f2317.js";import"./keyboard-f5d889b5.js";import"./use-is-mounted-7d7d3758.js";import"./bugs-ce4da728.js";const O=d=>{const f=d.slice(0,1),l=d.slice(1,2),h=d.slice(2,3),_=d.slice(3,4),o=d.slice(4,5);return`${f}년 ${l}월 ${h}일 ${_}시 ${o}분`},oe=()=>{const d=F();r.useEffect(()=>{d(H("학교 목록"))});const f=G(e=>e.themeConfig.rtlClass)==="rtl",[l,h]=r.useState(1),_=[10,20,30,50,100],[o,L]=r.useState(_[0]),[m,C]=r.useState([]),[M,S]=r.useState([]),[n,E]=r.useState(""),[N,R]=r.useState({columnAccessor:"schoolName",direction:"asc"}),[g,p]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const c=(await v()).map(u=>({...u,regDate:O(u.regDate)}));C(b(c,"schoolName"))}catch(a){console.error("학교 목록 불러오기 오류",a)}})()},[]),r.useEffect(()=>{h(1)},[o]),r.useEffect(()=>{const e=(l-1)*o,a=e+o;S([...m.slice(e,a)])},[l,o,m]),r.useEffect(()=>{const e=m.filter(a=>a.schoolId&&a.schoolId.toString().toLowerCase().includes(n.toLowerCase())||a.schoolName&&a.schoolName.toLowerCase().includes(n.toLowerCase())||a.schoolPhoneNumber&&a.schoolPhoneNumber.toLowerCase().includes(n.toLowerCase())||a.educationOffice&&a.educationOffice.toLowerCase().includes(n.toLowerCase())||a.schoolAddress&&a.schoolAddress.toLowerCase().includes(n.toLowerCase())||a.regDate&&a.regDate.toString().toLowerCase().includes(n.toLowerCase()));S(e.slice((l-1)*o,l*o))},[n,m,l,o]),r.useEffect(()=>{const e=b(m,N.columnAccessor);C(N.direction==="desc"?e.reverse():e),h(1)},[N]);const[P,w]=r.useState([]),[i,A]=r.useState("");r.useEffect(()=>{(async()=>{try{const a=await x(i);Array.isArray(a)?w(a.filter(c=>c.schoolName.toLowerCase().includes(i.toLowerCase()))):console.error("클라오류 1",a)}catch(a){console.error("클라 오류 2",a)}})()},[i]),r.useEffect(()=>{w(e=>e.filter(a=>a.schoolName.toLowerCase().includes(i.toLowerCase())))},[i]),r.useEffect(()=>{w([])},[i]);const T=async e=>{const a={ATPT_OFCDC_SC_CODE:e.ATPT_OFCDC_SC_CODE,ATPT_OFCDC_SC_NM:e.ATPT_OFCDC_SC_NM,SD_SCHUL_CODE:e.SD_SCHUL_CODE,SCHUL_NM:e.SCHUL_NM,ENG_SCHUL_NM:e.ENG_SCHUL_NM,SCHUL_KND_SC_NM:e.SCHUL_KND_SC_NM,LCTN_SC_NM:e.LCTN_SC_NM,JU_ORG_NM:e.JU_ORG_NM,FOND_SC_NM:e.FOND_SC_NM,ORG_RDNZC:e.ORG_RDNZC.trim(),ORG_RDNMA:e.ORG_RDNMA,ORG_RDNDA:e.ORG_RDNDA,ORG_TELNO:e.ORG_TELNO,HMPG_ADRES:e.HMPG_ADRES,COEDU_SC_NM:e.COEDU_SC_NM,ORG_FAXNO:e.ORG_FAXNO,HS_SC_NM:e.HS_SC_NM,INDST_SPECL_CCCCL_EXST_YN:e.INDST_SPECL_CCCCL_EXST_YN,HS_GNRL_BUSNS_SC_NM:e.HS_GNRL_BUSNS_SC_NM,SPCLY_PURPS_HS_ORD_NM:e.SPCLY_PURPS_HS_ORD_NM||"",ENE_BFE_SEHF_SC_NM:e.ENE_BFE_SEHF_SC_NM,DGHT_SC_NM:e.DGHT_SC_NM,FOND_YMD:e.FOND_YMD,FOAS_MEMRD:e.FOAS_MEMRD,LOAD_DTM:e.LOAD_DTM};try{await X(a),p(!1)}catch(c){console.error("학교 등록 오류",c)}},k=async e=>{if(window.confirm("정말로 이 학교를 삭제하시겠습니까?"))try{await Y(e);const c=(await v()).map(u=>({...u,regDate:O(u.regDate)}));C(b(c,"schoolName")),S(c.slice((l-1)*o,l*o))}catch(a){console.error("학교 삭제 오류",a)}};return s("div",{children:[s("div",{className:"panel flex items-center overflow-x-auto whitespace-nowrap p-3 text-primary",children:[t("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:t(B,{})}),t("span",{className:"ltr:mr-3 rtl:ml-3",children:"Documentation: "}),t("a",{href:"https://www.npmjs.com/package/mantine-datatable",target:"_blank",className:"block hover:underline",children:"https://www.npmjs.com/package/mantine-datatable"})]}),s("div",{className:"panel mt-6",children:[s("div",{className:"flex md:items-center md:flex-row flex-col mb-5 gap-5",children:[t("h5",{className:"font-semibold text-lg dark:text-white-light",children:"학교 목록"}),t("div",{className:"ltr:ml-auto rtl:mr-auto",children:t("input",{type:"text",className:"form-input w-auto",placeholder:"검색 하기",value:n,onChange:e=>E(e.target.value)})}),s("div",{children:[t("button",{type:"button",onClick:()=>{p(!0)},className:"btn btn-info",children:"학교 제작하기"}),t(D,{appear:!0,show:g,as:r.Fragment,children:s(y,{as:"div",open:g,onClose:()=>{p(!1)},children:[t(D.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t("div",{className:"fixed inset-0"})}),t("div",{id:"register_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:t("div",{className:"flex min-h-screen items-start justify-center px-4",children:t(D.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(y.Panel,{className:"panel my-8 w-full max-w-5xl overflow-hidden rounded-lg border-0 py-1 px-4 text-black dark:text-white-dark mx-auto",children:[s("div",{className:"flex items-center justify-between p-5 text-lg font-semibold dark:text-white",children:[t("h5",{children:"학교 생성"}),t("button",{type:"button",onClick:()=>p(!1),className:"text-white-dark hover:text-dark",children:t(I,{className:"w-5 h-5"})})]}),t("div",{className:"p-5",children:s("form",{children:[t("div",{className:"relative mb-4",children:s("div",{className:"mb-5 space-y-5",children:[t("form",{className:"mx-auto w-full sm:w-1/2 mb-5",children:s("div",{className:"relative",children:[t("input",{type:"text",value:i,placeholder:"학교 전체 검색",className:"form-input shadow-[0_0_4px_2px_rgb(31_45_61_/_10%)] bg-white rounded-full h-11 placeholder:tracking-wider ltr:pr-11 rtl:pl-11",onChange:e=>A(e.target.value)}),t("button",{type:"button",className:"btn btn-primary absolute ltr:right-1 rtl:left-1 inset-y-0 m-auto rounded-full w-9 h-9 p-0 flex items-center justify-center",onClick:()=>x(i),children:t(U,{className:"mx-auto"})})]})}),t("div",{className:"p-4 border border-white-dark/20 rounded-lg space-y-4 overflow-x-auto w-full block max-h-96 overflow-y-auto",children:P.map(e=>s("div",{className:`bg-white dark:bg-[#1b2e4b] rounded-xl shadow-[0_0_4px_2px_rgb(31_45_61_/_10%)] p-3 flex items-center justify-between\r
                text-gray-500 font-semibold min-w-[625px] hover:text-primary transition-all duration-300 hover:scale-[1.01]`,onClick:()=>T(e),children:[t("div",{children:e.schoolName}),t("div",{children:e.educationOffice}),t("div",{children:e.schoolAddress}),t("div",{children:e.schoolPhoneNumber})]},e.schoolName))})]})}),t("button",{className:"btn btn-primary w-full",children:"학교 생성하기"})]})}),s("div",{className:"border-t border-[#ebe9f1] p-5 dark:border-white/10",children:[t("div",{className:"my-1 text-center text-xs text-white-dark dark:text-white-dark/70",children:"OR"}),s("div",{className:"mb-5 flex items-center justify-center gap-3",children:[t("button",{type:"button",className:"btn btn-outline-primary flex gap-1",children:t("span",{children:"학교 수정"})}),t("button",{type:"button",className:"btn btn-outline-danger flex gap-1",children:t("span",{children:"학교 삭제"})})]})]})]})})})})]})})]})]}),t("div",{className:"datatables",children:t($,{highlightOnHover:!0,className:"whitespace-nowrap table-hover",records:M,columns:[{accessor:"schoolId",title:"학교 ID",sortable:!0},{accessor:"schoolName",title:"학교 이름",sortable:!0},{accessor:"schoolPhoneNumber",title:"전화 번호",sortable:!0},{accessor:"educationOffice",title:"담당 교육청",sortable:!0},{accessor:"schoolAddress",title:"학교 주소",sortable:!0},{accessor:"regDate",title:"생성일",sortable:!0},{accessor:"deleteSchool",title:"삭제하기",titleClassName:"!text-center",render:e=>t("div",{className:"flex items-center w-max mx-auto",children:t(z,{content:"Delete",children:t("button",{type:"button",onClick:async()=>{await k(e.schoolId),window.location.reload()},children:t(j,{})})})})}],totalRecords:m.length,recordsPerPage:o,page:l,onPageChange:e=>h(e),recordsPerPageOptions:_,onRecordsPerPageChange:L,sortStatus:N,onSortStatusChange:R,minHeight:200,paginationText:({from:e,to:a,totalRecords:c})=>`${c}개의 항목 중 ${e}에서 ${a}까지 표시`})})]})]})};export{oe as default,O as formatDate};
