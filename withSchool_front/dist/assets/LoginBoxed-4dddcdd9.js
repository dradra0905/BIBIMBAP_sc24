import{e as S,g as C,u as _,f as T,r as N,s as F,b as i,j as a,h as L,i as j,L as P}from"./index-e6579e08.js";import{l as R,g as O,a as D}from"./auth-ba940cfd.js";var y={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */y.exports;(function(u,h){(function(f){var b=h,x=u&&u.exports==b&&u,g=typeof S=="object"&&S;(g.global===g||g.window===g)&&(f=g);var v=function(e){this.message=e};v.prototype=new Error,v.prototype.name="InvalidCharacterError";var w=function(e){throw new v(e)},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/[\t\n\f\r ]/g,k=function(e){e=String(e).replace(I,"");var d=e.length;d%4==0&&(e=e.replace(/==?$/,""),d=e.length),(d%4==1||/[^+a-zA-Z0-9/]/.test(e))&&w("Invalid character: the string to be decoded is not correctly encoded.");for(var r=0,t,c,p="",E=-1;++E<d;)c=o.indexOf(e.charAt(E)),t=r%4?t*64+c:c,r++%4&&(p+=String.fromCharCode(255&t>>(-2*r&6)));return p},m=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&w("The string to be encoded contains characters outside of the Latin1 range.");for(var d=e.length%3,r="",t=-1,c,p,E,s,A=e.length-d;++t<A;)c=e.charCodeAt(t)<<16,p=e.charCodeAt(++t)<<8,E=e.charCodeAt(++t),s=c+p+E,r+=o.charAt(s>>18&63)+o.charAt(s>>12&63)+o.charAt(s>>6&63)+o.charAt(s&63);return d==2?(c=e.charCodeAt(t)<<8,p=e.charCodeAt(++t),s=c+p,r+=o.charAt(s>>10)+o.charAt(s>>4&63)+o.charAt(s<<2&63)+"="):d==1&&(s=e.charCodeAt(t),r+=o.charAt(s>>2)+o.charAt(s<<4&63)+"=="),r},n={encode:m,decode:k,version:"1.0.0"};if(b&&!b.nodeType)if(x)x.exports=n;else for(var l in n)n.hasOwnProperty(l)&&(b[l]=n[l]);else f.base64=n})(S)})(y,y.exports);var G=y.exports;const M=C(G),U=()=>{const u=_(),h=T(),[f,b]=N.useState(""),[x,g]=N.useState(""),[v,w]=N.useState("");return N.useEffect(()=>{u(F("Withschool-Login"))}),i("div",{children:[a("div",{className:"absolute inset-0",children:a("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),i("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat px-6 py-10 dark:bg-[#060818] sm:px-16",children:[a("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"image",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"}),a("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"image",className:"absolute left-24 top-0 h-40 md:left-[30%]"}),a("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"image",className:"absolute right-0 top-0 h-[300px]"}),a("img",{src:"/assets/images/auth/polygon-object.svg",alt:"image",className:"absolute bottom-0 end-[28%]"}),a("div",{className:"relative w-full max-w-[870px] rounded-md bg-[linear-gradient(45deg,#fff9f9_0%,rgba(255,255,255,0)_25%,rgba(255,255,255,0)_75%,_#fff9f9_100%)] p-2 dark:bg-[linear-gradient(52.22deg,#0E1726_0%,rgba(14,23,38,0)_18.66%,rgba(14,23,38,0)_51.04%,rgba(14,23,38,0)_80.07%,#0E1726_100%)]",children:a("div",{className:"relative flex flex-col justify-center rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 px-6 lg:min-h-[758px] py-20",children:i("div",{className:"mx-auto w-full max-w-[440px]",children:[i("div",{className:"mb-10",children:[a("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-primary md:text-4xl",children:"로그인"}),a("p",{className:"text-base font-bold leading-normal text-white-dark",children:"생성하신 아이디와 비밀번호를 입력하여 로그인해주세요."})]}),i("form",{className:"space-y-5 dark:text-white",onSubmit:async m=>{m.preventDefault();try{const n=await R(f,x);if(n&&n.accessToken){let l=n.accessToken,e=l.substring(l.indexOf(".")+1,l.lastIndexOf(".")),d=M.decode(e);const r=await JSON.parse(d);localStorage.setItem("userinfo",r),localStorage.setItem("token",l),localStorage.setItem("accountType",r.auth),localStorage.setItem("id",f),localStorage.setItem("login",l?"true":"false");const t=await O(l),c=await D(l);t&&localStorage.setItem("schoolId",t),c&&localStorage.setItem("classId",c),console.log(r),console.log("accountType : "+localStorage.getItem("accountType")),localStorage.getItem("accountType")=="ROLE_SUPER"?h("/superadmin/home"):localStorage.getItem("accountType")=="ROLE_ADMIN"?h("/admin/home"):localStorage.getItem("accountType")=="ROLE_TEACHER"?h("/teacher/home"):localStorage.getItem("accountType")=="ROLE_PARENT"?h("/parent/home"):localStorage.getItem("accountType")=="ROLE_STUDENT"&&h("/student/home")}else w("Login failed")}catch{w("Login failed")}},children:[i("div",{children:[a("label",{htmlFor:"Email",children:"ID"}),i("div",{className:"relative text-white-dark",children:[a("input",{id:"Email",placeholder:"아이디를 입력해 주세요.",className:"form-input ps-10 placeholder:text-white-dark",value:f,onChange:m=>{b(m.target.value)}}),a("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:a(L,{fill:!0})})]})]}),i("div",{children:[a("label",{htmlFor:"Password",children:"Password"}),i("div",{className:"relative text-white-dark",children:[a("input",{id:"Password",type:"password",placeholder:"비밀번호를 입력해 주세요.",className:"form-input ps-10 placeholder:text-white-dark",value:x,onChange:m=>{g(m.target.value)}}),a("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:a(j,{fill:!0})})]})]}),v&&a("div",{className:"text-red-500",children:"로그인에 실패하였습니다."}),a("button",{type:"submit",className:"btn btn-gradient !mt-10 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"로그인"})]}),i("div",{className:"relative my-7 text-center md:mb-9",children:[a("span",{className:"absolute inset-x-0 top-1/2 h-px w-full -translate-y-1/2 bg-white-light dark:bg-white-dark"}),a("span",{className:"relative bg-white px-2 font-bold uppercase text-white-dark dark:bg-dark dark:text-white-light",children:"or"})]}),i("div",{className:"font-semibold text-center dark:text-white",children:["학교랑 계정이 없으신가요?  ",a(P,{to:"/register/choose",className:"font-bold uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:"계정 생성하기"})]})]})})})]})]})};export{U as default};
