const n="http://223.130.134.181:8080",a=async()=>{try{const e=await fetch(`${n}/basic/schools`,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok)return await e.json();{const o=await e.text();throw console.error("Failed to fetch school list:",o),new Error(o)}}catch(e){throw console.error("Error fetching school list:",e),e}},h=async e=>{const o="https://cors-anywhere.herokuapp.com/",r=`https://open.neis.go.kr/hub/schoolInfo?KEY=215a0c0d1fd74b64946efdc0ef79bc04&Type=json&pIndex=1&pSize=100&SCHUL_NM=${e}`;try{const s=await fetch(o+r,{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){const t=await s.json();if(t.schoolInfo&&t.schoolInfo[1]&&t.schoolInfo[1].row)return t.schoolInfo[1].row.map(c=>({schoolName:c.SCHUL_NM,schoolPhoneNumber:c.ORG_TELNO,schoolAddress:c.ORG_RDNMA,educationOffice:c.ATPT_OFCDC_SC_NM,...c}));throw console.error("Unexpected API response structure:",t),new Error("Unexpected API response structure")}else{const t=await s.text();throw console.error("Failed to fetch school list from NEIS:",t),new Error(t)}}catch(s){throw console.error("Error fetching school list from NEIS:",s),s}},i=async e=>{try{const o=await fetch(`${n}/schools/notices?childId=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.ok)return await o.json();{const r=await o.text();throw console.error("Failed to fetch school notice:",r),new Error(r)}}catch(o){throw console.error("Error fetching school notice:",o),o}},l=async e=>{try{const o=await fetch(`${n}/schools/notices/${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.ok)return await o.json();{const r=await o.text();throw console.error("Failed to fetch school notice:",r),new Error(r)}}catch(o){throw console.error("Error fetching school notice:",o),o}},d=async e=>{console.log(e);try{const o=await fetch(`${n}/super/schools`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(o.ok)return await o.json();{const r=await o.text();throw console.error("Failed to register school:",r),new Error(r)}}catch(o){throw console.error("Error registering school:",o),o}},p=async e=>{try{const o=await fetch(`${n}/super/schools/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.ok)return await o.json();{const r=await o.text();throw console.error("Failed to delete school:",r),new Error(r)}}catch(o){throw console.error("Error deleting school:",o),o}},w=async e=>{try{const o=await fetch(`${n}/schools/info?childId=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.ok)return await o.json();{const r=await o.text();throw console.error("Failed to get school information:",r),new Error(r)}}catch(o){throw console.error("Error deleting school information:",o),o}};export{a,i as b,w as c,p as d,l as e,h as g,d as r};
