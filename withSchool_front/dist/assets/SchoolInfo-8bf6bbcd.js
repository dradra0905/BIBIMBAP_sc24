import{r as i,b as t,j as e,L,l as h,F as c,t as P,I as E}from"./index-e6579e08.js";import{T as m}from"./tippy-react.esm-a8453acd.js";import{l as j,m as R}from"./parent-a5a27d9a.js";import{b as U,c as O,e as A}from"./school-623913e2.js";import{I as N}from"./IconHome-8599979b.js";import{I as G}from"./IconPhone-fbd69088.js";import{I as z}from"./IconTrashLines-34fd4ba6.js";import{I as $}from"./IconDownload-24a2816e.js";import{I as H}from"./IconGallery-cd5e369d.js";import{I as q}from"./IconPrinter-2cc4c5d7.js";import{I as X,a as Z}from"./IconZipFile-77aad00d.js";import{I as B}from"./IconTxtFile-700fdc02.js";import{$ as n}from"./tabs-1aa6e749.js";import{q as p,_ as v}from"./transition-80f3a448.js";import"./keyboard-f5d889b5.js";import"./use-resolve-button-type-0cfcefe6.js";import"./use-is-mounted-7d7d3758.js";import"./bugs-ce4da728.js";const pe=()=>{const[b,o]=i.useState(!1),[u,x]=i.useState(""),[d,w]=i.useState([]),[f,y]=i.useState([]),[s,S]=i.useState([]);i.useState("");const[J,k]=i.useState(!1),[I,F]=i.useState(""),[a,g]=i.useState("");i.useEffect(()=>{(async()=>{try{const l=await j();w(l)}catch(l){console.error("Error fetching student list:",l)}})()},[]),i.useEffect(()=>{(async()=>{try{const l=await U(localStorage.getItem("TargetStudent"));y(l),console.log(l)}catch(l){console.error("Error fetching student data:",l)}})()},[]),i.useEffect(()=>{(async()=>{try{const l=await O(localStorage.getItem("TargetStudent"));S(l),console.log(l)}catch(l){console.error("Error fetching student data:",l)}})()},[]);const D=async r=>{try{const l=await A(r);g(l),console.log(l),k(!0)}catch(l){console.error("Error fetching notice detail:",l)}},C=r=>{x(r.target.value)},M=async r=>{await R(r)?(alert("학생 연결이 완료되었습니다."),o(!1)):alert("학생 연결에 실패하였습니다.")},_=r=>{F(r),console.log(I)};return t("div",{children:[t("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:[e("li",{children:e(L,{to:"/parent-home",className:"text-primary hover:underline",children:"학부모"})}),e("li",{className:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2",children:e("span",{children:"학교 정보"})})]}),e("div",{className:"panel",id:"icon_pills",children:e("div",{className:"mb-5",children:t(n.Group,{children:[t(n.List,{className:"mt-3 flex flex-wrap gap-2",children:[e(n,{as:i.Fragment,children:({selected:r})=>t("button",{className:`${r?"bg-warning text-white !outline-none":""}
                                            before:inline-block' -mb-[1px] flex items-center rounded p-3.5 py-2 hover:bg-warning hover:text-white`,children:[e(N,{className:"ltr:mr-2 rtl:ml-2"}),"학교 공지사항"]})}),e(n,{as:i.Fragment,children:({selected:r})=>t("button",{className:`${r?"bg-warning text-white !outline-none":""}
                                            before:inline-block' -mb-[1px] flex items-center rounded p-3.5 py-2 hover:bg-warning hover:text-white`,children:[e(h,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),"반 공지사항"]})}),e(n,{as:i.Fragment,children:({selected:r})=>t("button",{className:`${r?"bg-warning text-white !outline-none":""}
                                            before:inline-block' -mb-[1px] flex items-center rounded p-3.5 py-2 hover:bg-warning hover:text-white`,children:[e(G,{className:"ltr:mr-2 rtl:ml-2"}),"학사일정"]})}),e(n,{as:i.Fragment,children:({selected:r})=>t("button",{className:`${r?"bg-warning text-white !outline-none":""}
                                            before:inline-block' -mb-[1px] flex items-center rounded p-3.5 py-2 hover:bg-warning hover:text-white`,children:[e(N,{className:"ltr:mr-2 rtl:ml-2"}),"기본정보"]})})]}),t(n.Panels,{children:[e(n.Panel,{children:e("div",{className:"active pt-5",children:d.length===0?e(c,{children:e("h1",{children:"연결된 학생이 없습니다."})}):t("div",{className:"table-responsive mb-10",children:[f.length===0?e("h1",{children:"작성된 공지가 없습니다."}):e(c,{}),a==""&&t("table",{className:"table-hover text-center",children:[e("thead",{children:t("tr",{children:[e("th",{children:"제목"}),e("th",{children:"작성자"}),e("th",{children:"작성일시"}),e("th",{className:"text-center",children:"파일"})]})}),e("tbody",{children:f.slice().reverse().map((r,l,T)=>t("tr",{className:"cursor-pointer",onClick:()=>D(T.length-l),children:[e("td",{children:e("div",{className:"whitespace-nowrap",children:r.title})}),e("td",{children:r.user.name}),t("td",{children:[r.regDate[0],"년 ",r.regDate[1],"월 ",r.regDate[2],"일 ",r.regDate[3],":",String(r.regDate[4]).padStart(2,"0")]}),e("td",{className:"text-center",children:r.filesURL!=null?e(m,{content:"파일 다운로드",children:e("button",{type:"button",children:e(h,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})})}):e(c,{})})]},r.id))})]}),a!=""&&t("div",{children:[t("div",{className:"flex items-center justify-between flex-wrap p-4",children:[t("div",{className:"flex items-center",children:[e("button",{type:"button",className:"ltr:mr-2 rtl:ml-2 hover:text-primary",onClick:()=>g(""),children:e(P,{className:"w-5 h-5 rotate-180"})}),e("h4",{className:"text-base md:text-lg font-medium ltr:mr-2 rtl:ml-2",children:a.title}),e("div",{className:"badge bg-info hover:top-0",children:a.type})]}),e("div",{children:e(m,{content:"Print",children:e("button",{type:"button",children:e(q,{})})})})]}),e("div",{className:"h-px border-b border-white-light dark:border-[#1b2e4b]"}),t("div",{className:"p-4 relative",children:[e("div",{className:"flex flex-wrap",children:e("div",{className:"ltr:mr-2 rtl:ml-2 flex-1",children:e("div",{className:"flex items-center justify-end",children:t("div",{className:"text-sm ltr:mr-2 rtl:ml-4 whitespace-nowrap",children:["작성자: ",a.user.name]})})})}),e("div",{className:"text-2xl mb-4",dangerouslySetInnerHTML:{__html:a.content}}),t("p",{children:[a.user.name,"님이 공지함"]}),t("p",{children:[a.regDate[0],"년 ",a.regDate[1],"월 ",a.regDate[2],"일 ",a.regDate[3],"시 ",a.regDate[4],"분 게시됨"]}),a.filesURI&&t("div",{className:"mt-8",children:[e("div",{className:"text-base mb-4",children:"Attachments"}),e("div",{className:"h-px border-b border-white-light dark:border-[#1b2e4b]"}),e("div",{className:"flex items-center flex-wrap mt-6",children:a.filesURI.map((r,l)=>t("button",{type:"button",className:"flex items-center ltr:mr-4 rtl:ml-4 mb-4 border border-white-light dark:border-[#1b2e4b] rounded-md hover:text-primary hover:border-primary transition-all duration-300 px-4 py-2.5 relative group",children:[r.type==="image"&&e(H,{}),r.type==="folder"&&e(X,{}),r.type==="zip"&&e(Z,{}),r.type!=="zip"&&r.type!=="image"&&r.type!=="folder"&&e(B,{className:"w-5 h-5"}),t("div",{className:"ltr:ml-3 rtl:mr-3",children:[e("p",{className:"text-xs text-primary font-semibold",children:r.name}),e("p",{className:"text-[11px] text-gray-400 dark:text-gray-600",children:r.size})]}),e("div",{className:"bg-dark-light/40 z-[5] w-full h-full absolute ltr:left-0 rtl:right-0 top-0 rounded-md hidden group-hover:block"}),e("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full p-1 btn btn-primary hidden group-hover:block z-10",children:e($,{className:"w-4.5 h-4.5"})})]},l))})]})]})]})]})})}),e(n.Panel,{children:e("div",{children:t("div",{className:"flex items-start pt-5",children:[e("div",{className:"h-20 w-20 flex-none ltr:mr-4 rtl:ml-4",children:e("img",{src:"/assets/images/profile-34.jpeg",alt:"img",className:"m-0 h-20 w-20 rounded-full object-cover ring-2 ring-[#ebedf2] dark:ring-white-dark"})}),e("div",{className:"flex-auto",children:e("h1",{children:"구현중입니닷"})})]})})}),e(n.Panel,{children:t("div",{className:"panel",children:[e("div",{className:"table-responsive mb-5",children:t("table",{children:[e("thead",{children:t("tr",{children:[e("th",{children:"이름"}),e("th",{children:"학교"}),e("th",{children:"생년월일"}),e("th",{children:"등록일"}),e("th",{className:"text-center",children:"선택"})]})}),e("tbody",{children:d.map(r=>t("tr",{children:[e("td",{children:e("div",{className:"whitespace-nowrap",children:r.user.name})}),e("td",{children:r.user.schoolName}),e("td",{children:Math.floor(r.user.birthdate/1e4)>40?t(c,{children:["19",Math.floor(r.user.birthdate/1e4),"년 ",Math.floor(r.user.birthdate/100%100),"월 ",Math.floor(r.user.birthdate%100),"일"]}):Math.floor(r.user.birthdate/1e4)<10?t(c,{children:["200",Math.floor(r.user.birthdate/1e4),"년 ",Math.floor(r.user.birthdate/100%100),"월 ",Math.floor(r.user.birthdate%100),"일"]}):t(c,{children:["20",Math.floor(r.user.birthdate/1e4),"년 ",Math.floor(r.user.birthdate/100%100),"월 ",Math.floor(r.user.birthdate%100),"일"]})}),t("td",{children:[r.regDate[0],"년 ",r.regDate[1],"월 ",r.regDate[2],"일"]}),e("td",{className:"text-center",children:e(m,{content:"전환",children:e("button",{type:"button",onClick:()=>_(r.user.userId),children:e(z,{className:"m-auto"})})})})]},r.id))})]})}),t("div",{className:"relative text-white-dark flex justify-end",children:[e("button",{type:"button",onClick:()=>o(!0),className:"btn btn-primary",children:"학생 추가"}),e(p,{appear:!0,show:b,as:i.Fragment,children:t(v,{as:"div",open:b,onClose:()=>{o(!1)},children:[e(p.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"register_modal",className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:e("div",{className:"flex min-h-screen items-start justify-center px-4",children:e(p.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(v.Panel,{className:"panel my-8 w-full max-w-sm overflow-hidden rounded-lg border-0 py-1 px-4 text-black dark:text-white-dark",children:[t("div",{className:"flex items-center justify-between p-5 text-lg font-semibold dark:text-white",children:[e("h5",{children:"학생 추가하기"}),e("button",{type:"button",onClick:()=>o(!1),className:"text-white-dark hover:text-dark",children:e(E,{className:"w-5 h-5"})})]}),e("div",{className:"p-5",children:t("form",{children:[t("div",{className:"relative mb-4",children:[e("h2",{children:"연결하고자 하는 유저코드를 입력해 주세요."}),e("span",{className:"absolute top-1/2 -translate-y-1/2 ltr:left-3 rtl:right-3 dark:text-white-dark",children:e(h,{className:"w-5 h-5"})}),e("input",{type:"text",placeholder:"유저코드",className:"form-input ltr:pl-10 rtl:pr-10",id:"userCode",value:u,onChange:C})]}),e("button",{type:"button",onClick:()=>M(u),className:"btn btn-primary w-full",children:"추가하기"})]})})]})})})})]})})]})]})}),e(n.Panel,{children:e("div",{className:"active pt-5",children:d.length==0?e(c,{children:e("h1",{children:"연결된 학생이 없습니다."})}):e("div",{children:t("form",{className:"border border-[#ebedf2] dark:border-[#191e3a] rounded-md p-4 mb-5 bg-white dark:bg-black",children:[e("h6",{className:"text-lg font-bold mb-5",children:"학교 기본정보"}),e("div",{className:"flex flex-col sm:flex-row",children:t("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[t("div",{children:[e("label",{htmlFor:"name",children:"학교명"}),e("div",{className:"form-input",children:s.SCHUL_NM})]}),t("div",{children:[e("label",{htmlFor:"sex",children:"소속 교육청"}),e("div",{className:"form-input",children:s.ATPT_OFCDC_SC_NM})]}),t("div",{children:[e("label",{htmlFor:"id",children:"주소"}),e("div",{className:"form-input",children:s.ORG_RDNMA})]}),t("div",{children:[e("label",{htmlFor:"phone",children:"공립/사립"}),e("div",{className:"form-input",children:s.FOND_SC_NM})]}),t("div",{children:[e("label",{htmlFor:"email",children:"학교 홈페이지"}),e("div",{className:"form-input",children:e("a",{href:s.HMPG_ADRES,target:"_blank",rel:"noopener noreferrer",children:s.HMPG_ADRES})})]}),t("div",{children:[e("label",{htmlFor:"email",children:"공학여부"}),e("div",{className:"form-input",children:s.COEDU_SC_NM})]}),t("div",{children:[e("label",{htmlFor:"email",children:"학교 전화번호"}),e("div",{className:"form-input",children:s.ORG_TELNO})]}),t("div",{children:[e("label",{htmlFor:"email",children:"학교 팩스번호"}),e("div",{className:"form-input",children:s.ORG_FAXNO})]})]})})]})})})})]})]})})})]})};export{pe as default};
